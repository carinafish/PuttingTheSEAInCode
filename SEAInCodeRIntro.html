<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Chante Davis &amp; LaTreese Denson" />

<meta name="date" content="2020-12-04" />

<title>PuttingTheSEAInCode</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 45px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h2 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h3 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h4 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h5 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h6 {
  padding-top: 50px;
  margin-top: -50px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">HOME</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="first_observations.html">First Observations</a>
</li>
<li>
  <a href="basic_workflow.html">Basic Workflow</a>
</li>
<li>
  <a href="getting_sophisticated.html">Getting Sophisticated</a>
</li>
<li>
  <a href="your_turn.html">Your Turn</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">PuttingTheSEAInCode</h1>
<h4 class="author">Chante Davis &amp; LaTreese Denson</h4>
<h4 class="date">12/04/2020</h4>

</div>


<div id="workshop-goals" class="section level2">
<h2>Workshop Goals:</h2>
<ul>
<li>Determine the influence of two environmental factors on species growth.</li>
<li>Provide graphs and tables to summarize findings.</li>
<li>Create a function to automate this analyses.</li>
</ul>
</div>
<div id="prerequisits" class="section level2">
<h2>Prerequisits:</h2>
<p>You should have <a href="https://cran.r-project.org">R</a> and <a href="https://www.rstudio.com/products/rstudio/">Rstudio</a> installed. We will be working with R within the Rstudio environment.</p>
</div>
<div id="determine-set-and-create-directories" class="section level1">
<h1>Determine, Set, and Create Directories</h1>
<p>Determine which directory you are in:</p>
<pre class="r"><code>getwd()</code></pre>
<pre><code>## [1] &quot;C:/Users/latreese.denson/Documents/GitHub/PuttingTheSEAInCode&quot;</code></pre>
<p><strong>ProTip:</strong> Use Ctrl + Enter (Windows) or Cmd + Enter (Mac) to run the current line of code using a keyboard shortcut.</p>
<p>Not the right directory? That’s fine–let’s change it!</p>
<p>To change or set the directory in R use the <code>setwd()</code> function.</p>
<pre class="r"><code># The file path for your desktop
setwd(&quot;/Users/Me/Desktop&quot;)</code></pre>
<p><strong>Note:</strong> In this character string, you can only use a “/” or “\\” between folder names.</p>
<p>For example, to get the directory to a specific folder:</p>
<ol style="list-style-type: decimal">
<li>From your desktop or start menu, navigate to the folder you wish to save in, and open it.</li>
<li>Right-click in any empty space inside the folder, select properties.</li>
<li>Select and copy the location (e.g., “C:\\Users\\Me\\Desktop”).</li>
<li>Paste the location name inside the <code>setwd()</code> parentheses and add your folder name (e.g.,“\\SpecificFolder”).</li>
</ol>
<p>To keep things tidy, create another folder specifically for today’s workshop. This can be done by creating the object <code>todays.file</code> where you can change the name whenever you wish. You can also make a string of file names or whatever you want using <code>c()</code>.</p>
<pre class="r"><code>todays.file = &quot;SEAInCode&quot;</code></pre>
<p>You can also make a string of file names or whatever you want using <code>c()</code>. This will come in handy later.</p>
<p>Use <code>dir.create()</code> to make the new folder then set the working directory to <code>todays.file</code></p>
<pre class="r"><code>dir.create(todays.file)
setwd(todays.file)</code></pre>
<p><strong>ProTip:</strong> R does not like spaces. Use underscores instead.</p>
<p>Check to see if you are in the right place using <code>getwd()</code>, then use the function <code>dir()</code> to see what is in the folder.</p>
<pre class="r"><code>dir()</code></pre>
<pre><code>##  [1] &quot;_config.yml&quot;           &quot;_site.yml&quot;             &quot;A&quot;                    
##  [4] &quot;B&quot;                     &quot;boxplot_light.tiff&quot;    &quot;boxplot_temp.tiff&quot;    
##  [7] &quot;C&quot;                     &quot;growth_data.csv&quot;       &quot;ModelCoefficeints.csv&quot;
## [10] &quot;modeldiagnostics.tiff&quot; &quot;README.md&quot;             &quot;SEAInCodeRIntro.html&quot; 
## [13] &quot;SEAInCodeRIntro.md&quot;    &quot;SEAInCodeRIntro.Rmd&quot;   &quot;SEAInCodeRIntro_files&quot;
## [16] &quot;site_libs&quot;</code></pre>
<p><strong>ProTip:</strong> Messed up? Want to move up one directory? No problem! Run <code>setwd("..")</code>.</p>
</div>
<div id="install-and-load-packages" class="section level1">
<h1>Install and Load Packages</h1>
<p>There are millions of R packages designed to do all kinds of data analyses. Two packages that I have grown fond of for manipulating and visualizing data are <code>dplyr</code> and <code>ggplot2</code>. Fortunately, somebody decided to bundle these packages and a few others in what is called the “tidyverse”. We can install this package using <code>install.packages()</code>.</p>
<p><strong>dplyr:</strong> a package for data manipulation</p>
<p><strong>ggplot2:</strong> a package for creating graphics</p>
<p><strong>tidyverse:</strong> the data analysis super package!</p>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)</code></pre>
<p><strong>Note:</strong> Installing the package only needs to be done once.</p>
<p>Load the package every time a new R session is started using <code>library()</code>.</p>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 4.0.3</code></pre>
<pre><code>## -- Attaching packages ------------------------------------------------ tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.2     v purrr   0.3.4
## v tibble  3.0.3     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.5.0</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 4.0.2</code></pre>
<pre><code>## Warning: package &#39;tibble&#39; was built under R version 4.0.2</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 4.0.2</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 4.0.2</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;stringr&#39; was built under R version 4.0.2</code></pre>
<pre><code>## Warning: package &#39;forcats&#39; was built under R version 4.0.3</code></pre>
<pre><code>## -- Conflicts --------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p><strong>Note:</strong> If you are ever wondering how to use these packages check out the cheat sheets:</p>
<p><a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">ggplot2 cheat sheet</a></p>
<p><a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;ved=2ahUKEwjp7svH3pntAhVt0FkKHfR0DxYQFjAAegQIBBAC&amp;url=http%3A%2F%2Fwww.rstudio.com%2Fwp-content%2Fuploads%2F2015%2F02%2Fdata-wrangling-cheatsheet.pdf&amp;usg=AOvVaw2dHobUyR72zhFqfVO45D5A">dplyr cheat sheet</a></p>
<p>… or <strong>Google it</strong>!</p>
</div>
<div id="data-load-explorevisualize-analyze-vizualize-again-and-export-results" class="section level1">
<h1>Data: Load, Explore,Visualize, Analyze, Vizualize again and Export Results</h1>
<div id="load-data" class="section level2">
<h2>Load Data</h2>
<p>Read in the <a href="https://raw.githubusercontent.com/latreesedenson/SEAinCode/main/growth_data.csv">growth_data</a> from Github using <code>read.csv()</code> and give it the object name “data”:</p>
<pre class="r"><code>data = read.csv(&quot;https://raw.githubusercontent.com/latreesedenson/SEAinCode/main/growth_data.csv&quot;)

data=as.data.frame(data)</code></pre>
<p><strong>Note:</strong> You could also copy and paste the data from the web browser into an excel file, change the format to comma delimited, saved it as a csv file and then read it in using <code>read.csv()</code>. That way you would have a copy of the data on your local drive.</p>
</div>
<div id="explore-data" class="section level2">
<h2>Explore Data</h2>
<p>Make sure the data was read in correctly using the function <code>head()</code>.</p>
<pre class="r"><code>head(data)</code></pre>
<pre><code>##   X light_hrs temp_range   growth species
## 1 1     whole    average 146.7802       A
## 2 2      half    average 133.1117       A
## 3 3  extended    average 137.4000       A
## 4 4     whole      above 104.2082       A
## 5 5      half      above 113.2610       A
## 6 6  extended      above 103.5689       A</code></pre>
<p><strong>ProTip:</strong> Not sure what a function does? Type <code>?head()</code> into the console and see what pops up in the help menu. Scroll down to the bottom–there are often examples of how to use the function that you can practice with.</p>
<p>What are the column names? Is everything there that should be there?</p>
<pre class="r"><code>names(data)</code></pre>
<pre><code>## [1] &quot;X&quot;          &quot;light_hrs&quot;  &quot;temp_range&quot; &quot;growth&quot;     &quot;species&quot;</code></pre>
<p>What are the dimensions of the dataset, how many rows and columns?</p>
<pre class="r"><code>dim(data)</code></pre>
<pre><code>## [1] 270   5</code></pre>
<p>Let’s get some basic summary statistics from our <a href="data:minimum" class="uri">data:minimum</a>, maximum and mean.</p>
<pre class="r"><code>summary(data)</code></pre>
<pre><code>##        X           light_hrs          temp_range            growth      
##  Min.   : 1.000   Length:270         Length:270         Min.   : 63.19  
##  1st Qu.: 3.413   Class :character   Class :character   1st Qu.: 95.93  
##  Median : 5.805   Mode  :character   Mode  :character   Median :105.21  
##  Mean   : 8.559                                         Mean   :103.12  
##  3rd Qu.: 8.217                                         3rd Qu.:111.79  
##  Max.   :92.000                                         Max.   :146.78  
##    species         
##  Length:270        
##  Class :character  
##  Mode  :character  
##                    
##                    
## </code></pre>
<p>You will notice there are multiple species here and some NAs in the data. Let’s work with the first species and remove the bad records. We will use the pipe operator <code>%&gt;%</code> from the magrittr package within the tidyverse package to do this. This syntax leads to code that is easier to write and to read. Use the keyboard shortcut: Ctrl + Shift + M (Windows) or Cmd + Shift + M (Mac) to get the pipe operator.</p>
<pre class="r"><code>Species_A_Clean = data %&gt;% filter(species ==&quot;A&quot;,!is.na(light_hrs))

head(Species_A_Clean)</code></pre>
<pre><code>##   X light_hrs temp_range   growth species
## 1 1     whole    average 146.7802       A
## 2 2      half    average 133.1117       A
## 3 3  extended    average 137.4000       A
## 4 4     whole      above 104.2082       A
## 5 5      half      above 113.2610       A
## 6 6  extended      above 103.5689       A</code></pre>
<pre class="r"><code>dim(Species_A_Clean)</code></pre>
<pre><code>## [1] 90  5</code></pre>
<pre class="r"><code>summary(Species_A_Clean)</code></pre>
<pre><code>##        X          light_hrs          temp_range            growth      
##  Min.   :1.000   Length:90          Length:90          Min.   : 94.43  
##  1st Qu.:3.225   Class :character   Class :character   1st Qu.:105.63  
##  Median :5.450   Mode  :character   Mode  :character   Median :111.79  
##  Mean   :5.450                                         Mean   :115.99  
##  3rd Qu.:7.675                                         3rd Qu.:128.46  
##  Max.   :9.900                                         Max.   :146.78  
##    species         
##  Length:90         
##  Class :character  
##  Mode  :character  
##                    
##                    
## </code></pre>
</div>
<div id="visualize" class="section level2">
<h2>Visualize</h2>
<p>Let’s do a boxplot of our response vs. our explanatory variables. Here we are using ggplot2 but I also provide code for using Base R. You will notice that I have commented out some lines of code using ‘#’. This allows me to block out lines that I don’t want to run as well as create comments.</p>
<pre class="r"><code>ggplot(Species_A_Clean, aes(x=as.factor(light_hrs), y=growth)) + 
  geom_boxplot(fill=&quot;slateblue&quot;, alpha=0.2) +  xlab(&quot;light_hours&quot;)</code></pre>
<p><img src="SEAInCodeRIntro_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<pre class="r"><code># To save to a file for viewing later we use the function ggsave()
# The .tiff is the type of file, you can also use jpg
# .tiff files are good for publication graphics
# ggsave(&quot;boxplot_light.tiff&quot;)

ggplot(Species_A_Clean, aes(x=as.factor(temp_range), y=growth)) + 
  geom_boxplot(fill=&quot;slateblue&quot;, alpha=0.2) +  xlab(&quot;temp&quot;)</code></pre>
<p><img src="SEAInCodeRIntro_files/figure-html/unnamed-chunk-14-2.png" width="672" /></p>
<pre class="r"><code># ggsave(&quot;boxplot_temp.tiff&quot;)

# Here is the code to create a boxplot and save it in Base R
# Remove the # to run these 3 lines
# tiff(&quot;boxplot.tiff&quot;)
# boxplot(growth~temp_range,data=Species_A_Clean,xlab=&quot;temp_range&quot;, ylab=&quot;growth(wt&quot;)
# dev.off() </code></pre>
<p>Notice the way we save graphics is different depending on the package we are using. Also <code>dev.off()</code> closes all graphics devices so you can start a fresh graph next time.</p>
<p>Create a histogram of the data using the <code>geom_histogram()</code> function. Change the <code>binwidth</code> to see what happens.</p>
<pre class="r"><code>ggplot(Species_A_Clean, aes(x = growth)) +
  geom_histogram(binwidth = 1)</code></pre>
<p><img src="SEAInCodeRIntro_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code># You can remove the &#39;#&#39; in the line below if you want to save this
# ggsave(&quot;DataDistribution.tiff&quot;) 


# Base R
# hist(Species_A_Clean$growth, breaks=1, col=&quot;darkgrey&quot;, main = &quot;&quot;, xlab=&quot;growth&quot;) </code></pre>
</div>
<div id="analyze" class="section level2">
<h2>Analyze</h2>
<p>We use the <code>lm()</code> function which needs model and the data as it’s input. The model is setup using a <span class="math inline">\(\sim\)</span>, where <span class="math inline">\(y\sim x\)</span> means that Y is a function of X.</p>
<pre class="r"><code>lm(y ~ x1 + x2 + x3, Data = Data)
</code></pre>
<p>Let’s run a model with our species data. We tell R that we have a categorical factor with multiple levels such as diet quality by using the function <code>factor()</code>.</p>
<pre class="r"><code>SpeciesA.lm = lm(growth ~ factor(light_hrs)*factor(temp_range), data = Species_A_Clean)</code></pre>
<p>To get a summary of the linear model output we use the function <code>summary()</code>.</p>
<pre class="r"><code>sum.mod = summary(SpeciesA.lm)

####
# Additional functions you may find useful in the future
####
# coefficients(fit) # model coefficients
# confint(fit, level=0.95) # CIs for model parameters
# fitted(fit) # predicted values
# residuals(fit) # residuals
# anova(fit) # anova table 
####</code></pre>
<p>Here you have your important outputs to make a conclusion with.</p>
<p>Let’s save some of that information to an excel file. Note: you cannot save the entire output to a csv using the lines below. You may need some other functions.</p>
<pre class="r"><code>results = sum.mod$coefficients

out = as.data.frame(results)

write.csv(out,&quot;ModelCoefficeints.csv&quot;) # this is an excel file you can also write to a text file using write.table() and .txt file name instead of csv</code></pre>
<p>Let’s plot this relationship and some diagnostics of the fit to the model.</p>
<pre class="r"><code># tiff(&quot;ModelDiagnostics.tiff&quot;) # Remember you can save this graphic
par(mfrow=c(2,2)) # set up how we want them to be plotted: 2 rows 2 columns
plot(SpeciesA.lm)</code></pre>
<p><img src="SEAInCodeRIntro_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<pre class="r"><code>dev.off()  # close the plotting window and resets things</code></pre>
<pre><code>## null device 
##           1</code></pre>
<p>This produces 4 main plots each used to diagnose the fit of the model to the data.</p>
</div>
</div>
<div id="automation" class="section level1">
<h1>Automation</h1>
<p>Let’ say you now need to do this for the two other species, nobody wants to write all that code out again. Now we will build our own function and if there is time we will loop through and analyze the data for all of the species with the click of a button.</p>
</div>
<div id="functions" class="section level1">
<h1>Functions</h1>
<p>Just like <code>plot()</code>, <code>header()</code>, <code>summary()</code>, <code>dim()</code>, etc. are all functions, we can make our own functions too. Why do we make functions?</p>
<p>1.There is no available function to do what you want to do.</p>
<p>2.Work smarter – not harder! You have a task that needs to be repeated, and you do not want to keep writing the same lines of code over and over again.</p>
<p>Functions must have a name and arguments, and they must return something. Arguments are the inputs you plan to use in your function. We often use the function <code>return()</code> to have our functions “print” to the console or pass something on to another function. Example layout:</p>
<pre class="r"><code>func.name = function(arg1,arg2) 
  { # bracket to start function
  
  # code to do something, here
  
  return (something)

  } # bracket to end function</code></pre>
<p>Let’s do the following in a function: 1. Select the species of interest 2. Produce plots exploring the response vs the explanatory variables 4. Fit the full linear model and export a table 5. Plot the diagnostics</p>
<pre class="r"><code>do.analysis = function(species.name = &quot;B&quot;, input.data = data)
{
  # Use piping to select the data related to the species of choice in the first argument
  species.data = input.data %&gt;% filter(species == species.name)
  
# Create boxplots and save them for publication
  ggplot(species.data, aes(x=as.factor(light_hrs), y=growth)) + 
    geom_boxplot(fill=&quot;slateblue&quot;, alpha=0.2) +  xlab(&quot;light_hours&quot;)
  ggsave(&quot;boxplot_light.tiff&quot;)
  
  ggplot(species.data, aes(x=as.factor(temp_range), y=growth))+
  geom_boxplot(fill=&quot;slateblue&quot;, alpha=0.2) +  xlab(&quot;temp&quot;)
  ggsave(&quot;boxplot_temp.tiff&quot;)
  
  # Fit the model and save some of the results
  final.mod = lm(growth~light_hrs+temp_range,data = species.data)
  sum.mod = summary(final.mod)
  results = sum.mod$coefficients
  out = as.data.frame(results)
  write.csv(out,&quot;ModelCoefficeints.csv&quot;)
  
  # Plot and save the diagnostics
  tiff(&quot;modeldiagnostics.tiff&quot;)
  par(mfrow=c(2,2))
  plot(final.mod)
  dev.off()
  
  # use cat() to print a message when you are done with your analyses
  cat(paste(&quot;\nmodel outputs for species&quot;,species.name,&quot;are complete!\n&quot;))
}

# Try out your function
do.analysis(&quot;A&quot;,data)</code></pre>
<pre><code>## Saving 7 x 5 in image
## Saving 7 x 5 in image</code></pre>
<pre><code>## hat values (leverages) are all = 0.05555556
##  and there are no factor predictors; no plot no. 5</code></pre>
<pre><code>## 
## model outputs for species A are complete!</code></pre>
</div>
<div id="for-loops" class="section level1">
<h1>For Loops</h1>
<p>There are various types of loops but “for” loops are most common. You use loops when you want to do something iteratively. For loops have the following structure:</p>
<pre class="r"><code>for (i in 0:5) # a variable and range of values it will take
  { # a bracket to start
   
  #some calculation or function to do something
  
  } # a bracket to end the for loop</code></pre>
<p>Here “i” sequentially becomes a number from 0 to 5 and is used in each iteration of the loop.</p>
<p>Let’s try a simple example where we want to add i to 5. Our output should consist of a list of values. We’ll use the <code>cat()</code> function so we can see what the loop is doing.</p>
<pre class="r"><code>for (i in 0:5) 
  {
  x = i + 5 # Do something to i, iteratively
  
  cat(x) # see what happens if you take this out
  
  # I like to print what I am doing inside of a loop ... 
  # uncomment the next line to see what it does
  
  # cat(paste(&quot;i= &quot;, i, &quot;and i + 5 =&quot;, x,&quot;\n&quot;)) 
  
  } # end for loop</code></pre>
<pre><code>## 5678910</code></pre>
<p><strong>Now for the ultimate test</strong> Use what we have learned so far to perform the analyses function on each species by using a loop.</p>
<pre class="r"><code>species.list = c(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;) # vector of species names to loop through

for (i.species in 1:length(species.list))
{
  # i.species = 1 # test to see if your loop is working, it should change the current.species object
  current.species = species.list[i.species] # good practice to set an object name once and use it in multiple places
  dir.create(current.species) # create a new folder to work in or else things will overwrite because they have the same name
  setwd(current.species) # work in the newly created directory
  dir()
  do.analysis(current.species,data) # use the function we created previously
  setwd(&quot;..&quot;) # move back to the main folder to restart the loop
}</code></pre>
<pre><code>## Saving 7 x 5 in image
## Saving 7 x 5 in image</code></pre>
<pre><code>## hat values (leverages) are all = 0.05555556
##  and there are no factor predictors; no plot no. 5</code></pre>
<pre><code>## 
## model outputs for species A are complete!</code></pre>
<pre><code>## Saving 7 x 5 in image</code></pre>
<pre><code>## Saving 7 x 5 in image</code></pre>
<pre><code>## hat values (leverages) are all = 0.05555556
##  and there are no factor predictors; no plot no. 5</code></pre>
<pre><code>## 
## model outputs for species B are complete!</code></pre>
<pre><code>## Saving 7 x 5 in image</code></pre>
<pre><code>## Saving 7 x 5 in image</code></pre>
<pre><code>## hat values (leverages) are all = 0.05555556
##  and there are no factor predictors; no plot no. 5</code></pre>
<pre><code>## 
## model outputs for species C are complete!</code></pre>
</div>
<div id="final-protips" class="section level1">
<h1>Final ProTips</h1>
<ol style="list-style-type: decimal">
<li>Comment your code! ( Use the hashtag # )</li>
<li>R is case-sensitive. For example, “head()” is not the same as “Head().”</li>
<li>Be smart when naming files, folders, etc.. You will be looking for them later. Adding the date or sequential numbers to a folder name is helpful.</li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
